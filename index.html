<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>How did i do it? by ilyagetready</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>How did i do it?</h1>
        <p>Replication Experiments</p>

        <p class="view"><a href="https://github.com/ilyagetready/how_did_I_do_it">View the Project on GitHub <small>ilyagetready/how_did_I_do_it</small></a></p>


        <ul>
          <li><a href="https://github.com/ilyagetready/how_did_I_do_it/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/ilyagetready/how_did_I_do_it/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/ilyagetready/how_did_I_do_it">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="so-how-did-i-do-it" class="anchor" href="#so-how-did-i-do-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>So how did I do it?</h3>

<p>Whilst developing software or running experiments we often face an issue of creating so many files, that we lose track of what actually generated the file or what the file depended on. As experiments are a big part of academic life in University of St Andrews we have decided to create a tool that would help us to solve exactly that problem! SARR (Or Saint Andrews Result Replicator)\footnote{pronounced "SAAAAARRRRRRRRRR"}. SARR runs arbitrary programs and tracks the dependencies along with files that are generated. Once that is done, SARR can replicate the environment for any files generated by any programs that we run through SARR. </p>

<h3>
<a id="so-how-do-we-do-the-tracking-of-the-dependencies" class="anchor" href="#so-how-do-we-do-the-tracking-of-the-dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>So how do we do the tracking of the dependencies?</h3>

<p>In order to track the dependencies of the files we make use of the <a href="http://man7.org/linux/man-pages/man2/ptrace.2.html">ptrace</a> interface available for unix. Ptrace interface notifies SARR of any system calls coming from the process. Out of those system calls SARR picks out open/close/read/write/dup/execve/fork/vfork/clone system calls and tracks down the operations performed on the file handles.</p>

<p>Each of the files that are operated on during the execution get copied over to a separate folder along with the recipe file, that dictates where, what command was executed and what files it depended on. That tracking of files is done for each of the forks/clone that happen in the program.</p>

<hr>

<h3>
<a id="usage-example" class="anchor" href="#usage-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage example:</h3>

<p>First, the program has to be built: for that simply run the make file with 
    make -f Makefile
That would generate the sarr executable. Further manipulation with sarr executable is done using one of the following flags:</p>

<ul>
<li>./sarr -f <em>filename</em>
</li>
<li>./sarr -b <em>filename</em>
</li>
<li>./sarr -m <em>sha512 of the file to find recipe for</em>
</li>
</ul>

<p>Where:</p>

<ul>
<li>m flag tries to find the recipe for the file, just given its sha512</li>
<li>f flag simply tries to find the recipe for the file</li>
<li>b flag builds an environment for the file to be generated with an execution file</li>
<li>v could be additionally used to turn on verbose output</li>
</ul>

<p>The example usage is going to be based on the makefile itself for the SARR itself.
    ./saar make
would run the program and track all of the dependencies.</p>

<p>Once the program is run the files are going to be generated and outputted into the folder specified in headers/communicator.h (is going to moved out to a separate config file soon).</p>

<p>Now, lets track how the sarr it self was generate by running 
    ./sarr -f sarr
It would output the files needed and the working directory for the commands used. 
To generate the environment needed simply run 
    ./sarr -b sarr
The command is going the generate the environment in a separate folder in the /tmp/ folder. All of the necessary files along with the execution script is going to be located there.</p>

<h3>
<a id="development-team" class="anchor" href="#development-team" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development team</h3>

<p><a href="https://github.com/ilyagetready" class="user-mention">@ilyagetready</a>
<a href="https://github.com/turingfan" class="user-mention">@turingfan</a>
<a href="https://github.com/ChrisJefferson" class="user-mention">@ChrisJefferson</a></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/ilyagetready">ilyagetready</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
